(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tim-record"],{"0774":function(t,e,i){"use strict";var o=i("b648"),n=i.n(o);n.a},1370:function(t,e,i){"use strict";i.r(e);var o=i("5001"),n=i("59b8");for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("0774");var r,s=i("f0c5"),c=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,"423b8e64",null,!1,o["a"],r);e["default"]=c.exports},"2cba":function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,".list-box[data-v-423b8e64]{width:94%;margin:20px auto}.item-box[data-v-423b8e64]{width:auto;height:60px;padding:10px;overflow:hidden;border-bottom:1px solid #eee}.item-img[data-v-423b8e64]{float:left;\n\t/* margin-top: 10px; */width:60px;height:60px}.item-img img[data-v-423b8e64]{width:100%;height:100%}.item-text[data-v-423b8e64]{float:left;margin-left:15px;width:%?500?%;height:60px;color:#666;font-size:%?28?%}.item-user[data-v-423b8e64]{width:auto;height:30px;line-height:30px;color:#333;font-size:18px}.item-text-info[data-v-423b8e64]{width:auto;height:30px;line-height:30px;color:#666;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-box[data-v-423b8e64]{width:auto;height:40px;padding:0 %?20?%}.nav-tab[data-v-423b8e64]{padding-top:%?20?%;background:#fff;height:%?80?%}.tab-item[data-v-423b8e64]{float:left;height:%?70?%;padding:0 %?20?%;line-height:%?70?%;color:#666;font-size:%?28?%;border:1px solid #f56c6c;border-top-left-radius:%?25?%;border-bottom-left-radius:%?25?%}.tab-item1[data-v-423b8e64]{float:left;height:%?70?%;padding:0 %?20?%;line-height:%?70?%;color:#666;font-size:%?28?%;border:1px solid #f56c6c;border-top-right-radius:%?25?%;border-bottom-right-radius:%?25?%}.tab-item-active[data-v-423b8e64]{color:#fff;background:#f56c6c}.msg-box[data-v-423b8e64]{width:100%;line-height:20px;font-size:14px;color:#666;text-align:center}.user-item-box[data-v-423b8e64]{padding:%?20?% 0;width:auto;height:%?70?%;line-height:%?70?%;cursor:pointer;border-bottom:1px solid #eee}.user-img[data-v-423b8e64]{float:left;width:%?70?%;height:%?70?%;border-radius:50%;overflow:hidden}.user-img uni-image[data-v-423b8e64]{width:%?70?%;height:%?70?%;border-radius:50%}.user-name[data-v-423b8e64]{float:left;margin-left:%?20?%;width:%?250?%;height:%?70?%;line-height:%?70?%;color:#666;font-weight:500}.item-msg[data-v-423b8e64]{float:left;width:%?40?%;height:%?100?%}.item-msg-icon[data-v-423b8e64]{width:20px;height:20px;border-radius:50%;background:#f06c7a;color:#fff;line-height:20px;margin-top:15px;text-align:center;font-size:12px}.clear-box[data-v-423b8e64]{clear:both}.out-login[data-v-423b8e64]{float:right;margin-right:%?20?%;height:%?70?%;line-height:%?70?%;padding:0 %?40?%;border-radius:%?25?%;color:#fff;background:#f56c6c;font-size:%?26?%}",""]),t.exports=e},5001:function(t,e,i){"use strict";var o,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[0==t.isActive?i("v-uni-view",{staticClass:"conversition-box"},[t.conversationList&&t.conversationList.length>0?i("v-uni-view",{staticClass:"list-box"},t._l(t.conversationList,(function(e,o){return i("v-uni-view",{key:o,on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toRoom(e)}}},[i("v-uni-view",{staticClass:"item-box"},[i("v-uni-view",{staticClass:"item-img"},[e.userProfile.avatar?i("img",{attrs:{src:t.imgIP(e.userProfile.avatar),alt:""}}):i("img",{attrs:{src:t.imgIP("/static_s/51daiyan/images/mr_tx.jpg"),alt:""}})]),i("v-uni-view",{staticClass:"item-text"},[i("v-uni-view",{staticClass:"item-user"},[t._v(t._s(e.userProfile.nick))]),i("v-uni-view",{staticClass:"item-text-info"},[i("v-uni-rich-text",{attrs:{nodes:t.nodesFliter(e.lastMessage.messageForShow)}})],1)],1),i("v-uni-view",{staticClass:"item-msg"},[e.unreadCount?i("v-uni-view",{staticClass:"item-msg-icon"},[t._v(t._s(e.unreadCount))]):t._e()],1)],1)],1)})),1):i("v-uni-view",{staticClass:"list-box"},[i("span",{staticClass:"msg-box"},[t._v("暂无聊天记录")])])],1):t._e()],1)},a=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return o}))},"59b8":function(t,e,i){"use strict";i.r(e);var o=i("9255"),n=i.n(o);for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a},9255:function(t,e,i){"use strict";var o=i("ee27");i("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("f3f3")),a=o(i("2504")),r=i("2f62"),s={name:"record",data:function(){return{userList:a.default,friendList:[],isActive:0}},onLoad:function(t){var e=this;console.log(t.id),console.log(t.im);var i=this.tim.login({userID:t.id,userSig:t.im});i.then((function(i){console.log(i),e.$store.commit("toggleIsLogin",!0);var o={id:2,userToken:"321ae3e5779b98239cc7b9e083b3432f",phone:"",nickname:t.nickname,money:"500.15",advocacy_bean:"3777.00",stay_entry_money:"2.65",yet_entry_money:"1.65",yet_withdraw_money:"0.00",identification_id:"dy100002",IMSign:"eJwtjMEOgjAQBf9lz0a3pbSUxINevJhAqNGLF5OtuFERgShi-HcJ8G5vJpkv7LZu-vIVxCDnCLPhM-mi4TMPmD4C*8nJ1XQ9lSUTxEIhBpFEo0bj25IrD7FGFSGOrOF7T0RojTXCCDs1OO-DRRgcsuMio8RV8qJzR3Vnw01a*7Wmpg2Sm*v2Sj*e6Xu1hN8fIjcxZQ__",advocacy_grade_value:"0",introduction:t.introduction,sex:"1735660800",birthday:"1994-08-10",province:"北京市",city:"北京市",county:"东城区",auth_status:3,auth_cause:"",school_data:{school:"北京大学",department:"超级院系",entrance_time:"2020-08-10"},identity_id:2,identity_name:"达人",real_name:"李长寿",id_number:"142625199406223999",id_number_front:"/resource/api/img/20200804/3baeb324ac053003f97012a0797643d3.jpg",id_number_contrary:"/resource/api/img/20200804/60c7c73798d5845e1352553284188a08.jpg",start_validity:"2000-01-01",end_validity:"2029-01-01",weibo_account:"111",douyin_account:"2222",kuaishou_account:"3333",avatarurl:t.avatarurl,advocacy_goods_number:8,follow_buy_goods_number:1,exceed_number:0,public_benefit_number:3};uni.setStorageSync("userInfo",JSON.stringify(o)),uni.setStorageSync("userTIMInfo",JSON.stringify(i.data)),console.log("userTIMInfo========>"+JSON.stringify(i.data))})).catch((function(t){console.warn("login error:",t)}))},onShow:function(){console.log("onShow=======================================>"),this.isSDKReady?(console.log("isSDKReady=======================================>onShow"),this.getConversationList()):(console.log("!isSDKReady=======================================>onShow"),uni.stopPullDownRefresh())},onPullDownRefresh:function(){this.isSDKReady?(console.log("isSDKReady=======================================>onPullDownRefresh"),this.getConversationList()):(console.log("!isSDKReady=======================================>onPullDownRefresh"),uni.stopPullDownRefresh())},computed:(0,n.default)({},(0,r.mapState)({isLogin:function(t){return t.isLogin},isSDKReady:function(t){return t.isSDKReady},conversationList:function(t){return t.conversationList}})),watch:{isSDKReady:function(t){console.log("updateUserInfo==========================================================>isSDKReady"),console.log(t),t&&(this.updateUserInfo(),this.getConversationList())}},methods:{imgIP:function(t){if(t)return-1==t.indexOf("://")&&(t=service.imgurl+t),t},createGroup:function(){var t=this.tim.createGroup({type:this.$TIM.TYPES.GRP_PUBLIC,name:"阿萨德",memberList:[{userId:"3"},{userId:"4"}]});t.then((function(t){console.log(t.data.group),console.log("sss")})).catch((function(t){console.warn("createGroup error:",t)}))},getGroup:function(){var t=this.tim.getGroupList();t.then((function(t){console.log("群组"),console.log(t.data.groupList)})).catch((function(t){console.warn("getGroupList error:",t)}))},outLoginBtn:function(){var t=this,e=this.tim.logout();e.then((function(e){t.$store.commit("reset"),uni.reLaunch({url:"../index/index"})})).catch((function(t){console.log("退出失败")}))},updateUserInfo:function(){if(console.log("updateUserInfo======================================================>"),console.log(uni.getStorageSync("userInfo")),uni.getStorageSync("userInfo")){var t=uni.getStorageSync("userInfo"),e=JSON.parse(t),i=this.tim.updateMyProfile({nick:e.nickname,avatar:e.avatarurl,gender:this.$TIM.TYPES.GENDER_MALE,selfSignature:e.introduction,allowType:this.$TIM.TYPES.ALLOW_TYPE_ALLOW_ANY});i.then((function(t){console.log("提交资料成功")})).catch((function(t){console.warn("updateMyProfile error:",t)}))}},nodesFliter:function(t){var e='<div style="align-items: center;word-wrap:break-word;">'+t+"</div>";return e},changeTabBtn:function(t){this.isActive=t,this.isSDKReady&&this.getConversationList()},getConversationList:function(){var t=this,e=this.tim.getConversationList();e.then((function(e){uni.stopPullDownRefresh();var i=e.data.conversationList;i.length&&t.$store.commit("updateConversationList",i)})).catch((function(t){uni.stopPullDownRefresh(),console.warn("getConversationList error:",t)}))},toRoom:function(t){this.$store.commit("updateConversationActive",t),uni.navigateTo({url:"./room"})},checkUserToRoom:function(t){this.$store.commit("createConversationActive",t.userId),uni.navigateTo({url:"./room"})}}};e.default=s},b648:function(t,e,i){var o=i("2cba");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("677097b6",o,!0,{sourceMap:!1,shadowMode:!1})}}]);