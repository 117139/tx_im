(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tim-room"],{"2ff3":function(t,e,i){"use strict";i.r(e);var n=i("eda3"),a=i("5338");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("a1f7");var s,c=i("f0c5"),r=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"124c040c",null,!1,n["a"],s);e["default"]=r.exports},5338:function(t,e,i){"use strict";i.r(e);var n=i("cafc"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"9a93":function(t,e,i){"use strict";var n=i("ee27");i("c975"),i("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;n(i("e143"));var a=n(i("b48b")),o=(n(i("77d3")),n(i("fe3b"))),s="USERS_KEY",c="http://51daiyan.com.aa.800123456.top/api/",r="http://51daiyan.test.upcdn.net/",l={"content-type":"application/x-www-form-urlencoded"};function d(t,e,i,n){console.log("请求方式：","POST"),u(t,e,"POST",i,n)}function g(t,e,i,n){console.log("请求方式：","GET"),u(t,e,"GET",i,n)}function u(t,e,i,n,a){console.log("请求url："+t),console.log("请求头：",l),uni.request({url:c+t,data:f(e),method:i,header:l,success:function(t){if(uni.hideLoading(),uni.stopPullDownRefresh(),console.log("响应：",t.data),-1==t.data.code)return uni.showToast({icon:"none",title:"请先授权登录"}),void setTimeout((function(){uni.navigateTo({url:"./pages/login/login?haslogin=false"})}),1e3);n(t)},fail:function(t){uni.hideLoading(),uni.stopPullDownRefresh(),a(t)}})}function f(t){return console.log("请求参数:",t),t}var p=function(){var t="";return t=uni.getStorageSync(s),t||(t="[]"),JSON.parse(t)},b=function(t){var e=p();e.push({account:t.account,password:t.password}),uni.setStorageSync(s,JSON.stringify(e))},v=function(){uni.navigateTo({url:"/pages/login_index/login_index"})},h=function(t){console.log(t.currentTarget.dataset.type);var e=t.currentTarget.dataset;if(!e.login||(console.log(e.haslogin),e.haslogin))return"sp"==e.type?(console.log(e.spurl),a.default.commit("spurl_fuc",e.spurl),void uni.navigateTo({url:e.url})):void(2==e.type?uni.switchTab({url:e.url}):uni.navigateTo({url:e.url}));uni.navigateTo({url:"../login/login"})},m=function(t){var e=t.currentTarget.dataset.src,i=t.currentTarget.dataset.array,n=[];i?n=i:n[0]=e,console.log(n),uni.previewImage({current:e,urls:n})},w=function(t){t.currentTarget.dataset.tel&&wx.makePhoneCall({phoneNumber:t.currentTarget.dataset.tel+""})},y=function(t){uni.getSetting({success:function(e){console.log(e),1==e.authSetting["scope.userInfo"]?(console.log("已经授权"),uni.getUserInfo({success:function(e){var i=e.userInfo;console.log(i),uni.setStorageSync("userInfo",e.userInfo),i&&uni.login({success:function(e){var n=i,s={code:e.code,nickname:n.nickName,avatarurl:n.avatarUrl};e.code;console.log(e.code),uni.request({url:c+"/login",data:s,header:{"content-type":"application/x-www-form-urlencoded"},dataType:"json",method:"POST",success:function(e){uni.hideLoading(),console.log(e.data),1==e.data.code?(console.log("登录成功"),console.log(e.data),a.default.commit("login",e.data.data),uni.setStorageSync("token",e.data.data.userToken),uni.setStorageSync("loginmsg",e.data.data),o.default.trigger({type:"test",page:"/pages/index/index",obj:{},test:{loginmsg:e.data.data},success:function(t){}}),1==t&&(uni.showToast({icon:"none",title:"登录成功"}),setTimeout((function(){uni.navigateBack()}),1e3))):(uni.removeStorageSync("userInfo"),uni.removeStorageSync("token"),uni.showToast({icon:"none",title:"登录失败"}))},fail:function(){uni.hideLoading(),uni.showToast({icon:"none",title:"登录失败"})}})}})}})):uni.hideLoading()}})},x=function(t){var e="/user/amendInfo";d(e,t,(function(t){if(1==t.data.code){var e=t.data.data;"string"==typeof e&&(e=JSON.parse(e)),y(),uni.showToast({title:"操作成功"})}else t.data.msg?uni.showToast({icon:"none",title:t.data.msg}):uni.showToast({icon:"none",title:"操作失败"})}),(function(t){that.btnkg=0,uni.showToast({icon:"none",title:"获取数据失败"})}))},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.url,i=void 0===e?"":e,n=t.param,a=void 0===n?{}:n,o=t.method,s=void 0===o?"":o,c=t.header,r=void 0===c?{"content-type":"application/x-www-form-urlencoded"}:c,l=Date.now();return new Promise((function(t,e){console.log("请求url："+A(i)),console.log("请求头：",r),console.log("param：",a),wx.request({url:A(i),data:a,method:s,header:r,complete:function(i){if(uni.hideLoading(),uni.stopPullDownRefresh(),console.log("耗时".concat(Date.now()-l)),console.log(i),200==i.statusCode){if(-1==i.data.code)return void uni.navigateTo({url:"/pages/login/login"});if(0==i.data.code&&"请先登录账号~"==i.msg)return void uni.navigateTo({url:"/pages/login/login"});0==i.data.code&&(i.data.msg?uni.showToast({icon:"none",title:i.data.msg}):uni.showToast({icon:"none",title:"操作失败"})),t(i.data)}else e(i)}})}))},A=function(t){return-1==t.indexOf("://")&&(t=c+t),t},T=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wx.showLoading({title:"请求中，请耐心等待..."}),k({url:t,param:e,method:"GET"})},C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k({url:t,param:e,method:"POST"})},M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k({url:t,param:e,method:"put"})},I=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k({url:t,param:e,method:"put"})},U=function(t){if(!t)return{};var e=new Date(1e3*t),i=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),o=e.getHours(),s=e.getMinutes(),c=new Date,r=c.getFullYear();c.getMonth(),c.getDate(),c.getHours(),c.getMinutes();return a=a<10?"0"+a:a,o=o<10?"0"+o:o,s=s<10?"0"+s:s,i==r?{type:1,year:i,month:n,date:a,hour:o,minute:s,time:"今天 "+o+":"+s}:{type:2,year:i,month:n,date:a,hour:o,minute:s,time:i+"-"+n+"-"+a}},D={getUsers:p,addUser:b,get:g,post:d,IPurl:c,imgurl:r,gologin:v,jump:h,pveimg:m,call:w,wxlogin:y,setUsermsg:x,P_get:T,P_post:C,P_put:M,P_delete:I,gettime:U};e.default=D},a1f7:function(t,e,i){"use strict";var n=i("f592"),a=i.n(n);a.a},af96:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-124c040c]{background-color:#e5e5e5}@font-face{font-family:HMfont-home;src:url("data:application/x-font-woff2;charset=utf-8;base64,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") format("woff2")}.icon[data-v-124c040c]{font-family:HMfont-home!important;font-size:28px;font-style:normal;color:#333}.icon.biaoqing[data-v-124c040c]:before{content:"\\e797"}.icon.jianpan[data-v-124c040c]:before{content:"\\e7b2"}.icon.yuyin[data-v-124c040c]:before{content:"\\e805"}.icon.tupian[data-v-124c040c]:before{content:"\\e639"}.icon.chehui[data-v-124c040c]:before{content:"\\e904"}.icon.luyin[data-v-124c040c]:before{content:"\\e905"}.icon.luyin2[data-v-124c040c]:before{content:"\\e677"}.icon.other-voice[data-v-124c040c]:before{content:"\\e667"}.icon.my-voice[data-v-124c040c]:before{content:"\\e906"}.icon.hongbao[data-v-124c040c]:before{content:"\\e626"}.icon.tupian2[data-v-124c040c]:before{content:"\\e674"}.icon.paizhao[data-v-124c040c]:before{content:"\\e63e"}.icon.add[data-v-124c040c]:before{content:"\\e655"}.icon.close[data-v-124c040c]:before{content:"\\e607"}.icon.to[data-v-124c040c]:before{content:"\\e675"}.hidden[data-v-124c040c]{display:none!important}.popup-layer[data-v-124c040c]{-webkit-transition:all .15s linear;transition:all .15s linear;width:96%;height:42vw;padding:%?20?% 2%;background-color:#f3f3f3;border-top:solid %?1?% #ddd;position:fixed;z-index:20;top:100%}.popup-layer.showLayer[data-v-124c040c]{-webkit-transform:translate3d(0,-42vw,0);transform:translate3d(0,-42vw,0)}.popup-layer .emoji-swiper[data-v-124c040c]{height:40vw}.popup-layer .emoji-swiper uni-swiper-item[data-v-124c040c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-content:flex-start;align-content:flex-start;-webkit-flex-wrap:wrap;flex-wrap:wrap}.popup-layer .emoji-swiper uni-swiper-item uni-view[data-v-124c040c]{width:12vw;height:12vw;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.popup-layer .emoji-swiper uni-swiper-item uni-view uni-image[data-v-124c040c]{width:8.4vw;height:8.4vw}.popup-layer .more-layer[data-v-124c040c]{width:100%;height:42vw}.popup-layer .more-layer .list[data-v-124c040c]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.popup-layer .more-layer .list .box[data-v-124c040c]{width:18vw;height:18vw;border-radius:%?20?%;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin:0 3vw 2vw 3vw}.popup-layer .more-layer .list .box .icon[data-v-124c040c]{font-size:35px}.input-box[data-v-124c040c]{width:98%;min-height:50px;padding:0 1%;background-color:#f2f2f2;display:-webkit-box;display:-webkit-flex;display:flex;position:fixed;z-index:20;bottom:%?-2?%;-webkit-transition:all .15s linear;transition:all .15s linear;border-bottom:solid %?1?% #ddd}.input-box.showLayer[data-v-124c040c]{-webkit-transform:translate3d(0,-42vw,0);transform:translate3d(0,-42vw,0)}.input-box .voice[data-v-124c040c], .input-box .more[data-v-124c040c]{-webkit-flex-shrink:0;flex-shrink:0;width:45px;height:50px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.input-box .send[data-v-124c040c]{\r\nmargin-left:%?20?%;\r\n-webkit-flex-shrink:0;flex-shrink:0;width:50px;height:50px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.input-box .send .btn[data-v-124c040c]{width:45px;height:28px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:-webkit-linear-gradient(left,#f09b37,#eb632c);background:linear-gradient(90deg,#f09b37,#eb632c);color:#fff;border-radius:3px;font-size:13px}.input-box .textbox[data-v-124c040c]{width:100%;min-height:35px;margin-top:7px}.input-box .textbox .voice-mode[data-v-124c040c]{width:calc(100% - %?2?%);height:34px;border-radius:35px;border:solid %?1?% #cdcdcd;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:14px;background-color:#fff;color:#555}.input-box .textbox .voice-mode.recording[data-v-124c040c]{background-color:#e5e5e5}.input-box .textbox .text-mode[data-v-124c040c]{width:100%;min-height:35px;display:-webkit-box;display:-webkit-flex;display:flex;background-color:#fff;border-radius:%?40?%}.input-box .textbox .text-mode .box[data-v-124c040c]{width:100%;padding-left:%?30?%;min-height:35px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.input-box .textbox .text-mode .box uni-textarea[data-v-124c040c]{width:100%}.input-box .textbox .text-mode .box uni-input[data-v-124c040c]{width:100%}.input-box .textbox .text-mode .em[data-v-124c040c]{-webkit-flex-shrink:0;flex-shrink:0;width:40px;padding-left:%?10?%;height:35px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.record[data-v-124c040c]{width:40vw;height:40vw;position:fixed;top:55%;left:30%;background-color:rgba(0,0,0,.6);border-radius:%?20?%}.record .ing[data-v-124c040c]{width:100%;height:30vw;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}@-webkit-keyframes volatility-data-v-124c040c{0%{background-position:0 130%}20%{background-position:0 150%}30%{background-position:0 155%}40%{background-position:0 150%}50%{background-position:0 145%}70%{background-position:0 150%}80%{background-position:0 155%}90%{background-position:0 140%}100%{background-position:0 135%}}@keyframes volatility-data-v-124c040c{0%{background-position:0 130%}20%{background-position:0 150%}30%{background-position:0 155%}40%{background-position:0 150%}50%{background-position:0 145%}70%{background-position:0 150%}80%{background-position:0 155%}90%{background-position:0 140%}100%{background-position:0 135%}}.record .ing .icon[data-v-124c040c]{background-image:-webkit-linear-gradient(top,#f09b37,#fff 50%);background-image:linear-gradient(180deg,#f09b37,#fff 50%);background-size:100% 200%;-webkit-animation:volatility-data-v-124c040c 1.5s ease-in-out -1.5s infinite alternate;animation:volatility-data-v-124c040c 1.5s ease-in-out -1.5s infinite alternate;-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:%?150?%;color:#f09b37}.record .cancel[data-v-124c040c]{width:100%;height:30vw;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.record .cancel .icon[data-v-124c040c]{color:#fff;font-size:%?150?%}.record .tis[data-v-124c040c]{width:100%;height:10vw;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?28?%;color:#fff}.record .tis.change[data-v-124c040c]{color:#f09b37}.content[data-v-124c040c]{width:100%}.content .msg-list[data-v-124c040c]{width:96%;padding:0 2%;position:absolute;top:0;bottom:%?100?%}.content .msg-list .loading[data-v-124c040c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}@-webkit-keyframes stretchdelay-data-v-124c040c{0%, 40%, 100%{-webkit-transform:scaleY(.6);transform:scaleY(.6)}20%{-webkit-transform:scaleY(1);transform:scaleY(1)}}@keyframes stretchdelay-data-v-124c040c{0%, 40%, 100%{-webkit-transform:scaleY(.6);transform:scaleY(.6)}20%{-webkit-transform:scaleY(1);transform:scaleY(1)}}.content .msg-list .loading .spinner[data-v-124c040c]{margin:%?20?% 0;width:%?60?%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.content .msg-list .loading .spinner uni-view[data-v-124c040c]{background-color:#f06c7a;height:%?50?%;width:%?6?%;border-radius:%?6?%;-webkit-animation:stretchdelay-data-v-124c040c 1.2s infinite ease-in-out;animation:stretchdelay-data-v-124c040c 1.2s infinite ease-in-out}.content .msg-list .loading .spinner .rect2[data-v-124c040c]{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.content .msg-list .loading .spinner .rect3[data-v-124c040c]{-webkit-animation-delay:-1s;animation-delay:-1s}.content .msg-list .loading .spinner .rect4[data-v-124c040c]{-webkit-animation-delay:-.9s;animation-delay:-.9s}.content .msg-list .loading .spinner .rect5[data-v-124c040c]{-webkit-animation-delay:-.8s;animation-delay:-.8s}.content .msg-list .row[data-v-124c040c]{padding:%?20?% 0}.content .msg-list .row .system[data-v-124c040c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.content .msg-list .row .system uni-view[data-v-124c040c]{padding:0 %?30?%;height:%?50?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#c9c9c9;color:#fff;font-size:%?24?%;border-radius:%?40?%}.content .msg-list .row .system .red-envelope uni-image[data-v-124c040c]{margin-right:%?5?%;width:%?30?%;height:%?30?%}.content .msg-list .row[data-v-124c040c]:first-child{margin-top:50px}.content .msg-list .row .my .left[data-v-124c040c], .content .msg-list .row .other .right[data-v-124c040c]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex}.content .msg-list .row .my .left .bubble[data-v-124c040c], .content .msg-list .row .other .right .bubble[data-v-124c040c]{max-width:80%;min-height:25px;border-radius:5px;padding:6px 10px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:16px;word-break:break-word}.content .msg-list .row .my .left .bubble.img[data-v-124c040c], .content .msg-list .row .other .right .bubble.img[data-v-124c040c]{background-color:initial;padding:0;overflow:hidden}.content .msg-list .row .my .left .bubble.img uni-image[data-v-124c040c], .content .msg-list .row .other .right .bubble.img uni-image[data-v-124c040c]{max-width:%?350?%;max-height:%?350?%}.content .msg-list .row .my .left .bubble.red-envelope[data-v-124c040c], .content .msg-list .row .other .right .bubble.red-envelope[data-v-124c040c]{background-color:initial;padding:0;overflow:hidden;position:relative;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start}.content .msg-list .row .my .left .bubble.red-envelope uni-image[data-v-124c040c], .content .msg-list .row .other .right .bubble.red-envelope uni-image[data-v-124c040c]{width:%?250?%;height:%?313?%}.content .msg-list .row .my .left .bubble.red-envelope .tis[data-v-124c040c], .content .msg-list .row .other .right .bubble.red-envelope .tis[data-v-124c040c]{position:absolute;top:6%;font-size:%?26?%;color:#9c1712}.content .msg-list .row .my .left .bubble.red-envelope .blessing[data-v-124c040c], .content .msg-list .row .other .right .bubble.red-envelope .blessing[data-v-124c040c]{position:absolute;bottom:14%;color:#e9b874;width:80%;text-align:center;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.content .msg-list .row .my .left .bubble.voice .icon[data-v-124c040c], .content .msg-list .row .other .right .bubble.voice .icon[data-v-124c040c]{font-size:%?40?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .msg-list .row .my .left .bubble.voice .icon[data-v-124c040c]:after, .content .msg-list .row .other .right .bubble.voice .icon[data-v-124c040c]:after{content:" ";width:%?53?%;height:%?53?%;border-radius:100%;position:absolute;box-sizing:border-box}.content .msg-list .row .my .left .bubble.voice .length[data-v-124c040c], .content .msg-list .row .other .right .bubble.voice .length[data-v-124c040c]{font-size:%?28?%}.content .msg-list .row .my .right[data-v-124c040c], .content .msg-list .row .other .left[data-v-124c040c]{-webkit-flex-shrink:0;flex-shrink:0;width:60px;height:60px}.content .msg-list .row .my .right uni-image[data-v-124c040c], .content .msg-list .row .other .left uni-image[data-v-124c040c]{width:100%;height:100%;border-radius:%?10?%}.content .msg-list .row .my[data-v-124c040c]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.content .msg-list .row .my .left[data-v-124c040c]{min-height:50px;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.content .msg-list .row .my .left .bubble[data-v-124c040c]{background-color:#fff;color:#333}.content .msg-list .row .my .left .bubble.voice .icon[data-v-124c040c]{color:#fff}.content .msg-list .row .my .left .bubble.voice .length[data-v-124c040c]{margin-right:%?20?%}@-webkit-keyframes my-play-data-v-124c040c{0%{-webkit-transform:translateX(80%);transform:translateX(80%)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes my-play-data-v-124c040c{0%{-webkit-transform:translateX(80%);transform:translateX(80%)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}.content .msg-list .row .my .left .bubble.play .icon[data-v-124c040c]:after{border-left:solid %?10?% rgba(240,108,122,.5);-webkit-animation:my-play-data-v-124c040c 1s linear infinite;animation:my-play-data-v-124c040c 1s linear infinite}.content .msg-list .row .my .right[data-v-124c040c]{margin-left:%?15?%}.content .msg-list .row .other[data-v-124c040c]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex}.content .msg-list .row .other .left[data-v-124c040c]{margin-right:%?15?%}.content .msg-list .row .other .right[data-v-124c040c]{-webkit-flex-wrap:wrap;flex-wrap:wrap}.content .msg-list .row .other .right .username[data-v-124c040c]{width:100%;height:%?45?%;font-size:%?24?%;color:#999;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-right:%?130?%}.content .msg-list .row .other .right .username .name[data-v-124c040c]{margin-right:%?50?%}.content .msg-list .row .other .right .bubble[data-v-124c040c]{background-color:#fff;color:#333}.content .msg-list .row .other .right .bubble.voice .icon[data-v-124c040c]{color:#333}.content .msg-list .row .other .right .bubble.voice .length[data-v-124c040c]{margin-left:%?20?%}@-webkit-keyframes other-play-data-v-124c040c{0%{-webkit-transform:translateX(-80%);transform:translateX(-80%)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes other-play-data-v-124c040c{0%{-webkit-transform:translateX(-80%);transform:translateX(-80%)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}.content .msg-list .row .other .right .bubble.play .icon[data-v-124c040c]:after{border-right:solid %?10?% hsla(0,0%,100%,.8);-webkit-animation:other-play-data-v-124c040c 1s linear infinite;animation:other-play-data-v-124c040c 1s linear infinite}.windows .mask[data-v-124c040c]{position:fixed;top:100%;width:100%;height:100%;z-index:1000;background-color:rgba(0,0,0,.6);opacity:0;-webkit-transition:opacity .2s ease-out;transition:opacity .2s ease-out}.windows .layer[data-v-124c040c]{position:fixed;width:80%;height:70%;left:10%;z-index:1001;border-radius:%?20?%;overflow:hidden;top:100%;-webkit-transform:scale3d(.5,.5,1);transform:scale3d(.5,.5,1);-webkit-transition:all .2s ease-out;transition:all .2s ease-out}.windows.show[data-v-124c040c]{display:block}.windows.show .mask[data-v-124c040c]{top:0;opacity:1}.windows.show .layer[data-v-124c040c]{-webkit-transform:translate3d(0,-85vh,0) scaleX(1);transform:translate3d(0,-85vh,0) scaleX(1)}.windows.hide[data-v-124c040c]{display:block}.windows.hide .mask[data-v-124c040c]{top:0;opacity:0}.open-redenvelope[data-v-124c040c]{width:100%;height:70vh;background-color:#cf3c35;position:relative}.open-redenvelope .top[data-v-124c040c]{width:100%;background-color:#fe5454;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-wrap:wrap;flex-wrap:wrap;border-radius:0 0 100% 100%;box-shadow:inset 0 %?-20?% 0 #9c1712;margin-bottom:%?65?%}.open-redenvelope .top .close-btn[data-v-124c040c]{width:100%;height:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;margin-bottom:%?30?%}.open-redenvelope .top .close-btn .icon[data-v-124c040c]{color:#9c1712;margin-top:%?10?%;margin-right:%?10?%}.open-redenvelope .top uni-image[data-v-124c040c]{width:%?130?%;height:%?130?%;border:solid %?12?% #cf3c35;border-radius:100%;margin-bottom:%?-65?%}.open-redenvelope .from[data-v-124c040c], .open-redenvelope .blessing[data-v-124c040c], .open-redenvelope .money[data-v-124c040c], .open-redenvelope .showDetails[data-v-124c040c]{width:90%;padding:%?5?% 5%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?32?%;color:#fff}.open-redenvelope .money[data-v-124c040c]{font-size:%?100?%;color:#f8d757;display:-webkit-box;display:-webkit-flex;display:flex;padding-top:%?20?%}.open-redenvelope .showDetails[data-v-124c040c]{position:absolute;bottom:%?20?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%;color:#f8d757}.open-redenvelope .showDetails .icon[data-v-124c040c]{font-size:%?26?%;color:#f8d757}.msg-list1[data-v-124c040c]{width:100%;padding-bottom:%?100?%}.chat_box[data-v-124c040c]{width:600px;max-width:100%;display:-webkit-box;display:-webkit-flex;display:flex;text-decoration:none}.chat_img[data-v-124c040c]{width:100px;height:100px;margin-right:10px}.chat_msg[data-v-124c040c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-flex:1;-webkit-flex:1;flex:1}.gb_name[data-v-124c040c]{font-size:26px;color:#333;text-decoration:none}.gb_msg[data-v-124c040c]{font-size:20px;color:#333;text-decoration:none}.ltbox_div[data-v-124c040c]{line-height:%?45?%}.username[data-v-124c040c]{position:relative;height:%?1?%!important}.username .time[data-v-124c040c]{position:absolute;top:%?-40?%;left:0;right:0;text-align:center;padding-right:%?130?%;font-size:16px}.emoji_i[data-v-124c040c]{height:%?40?%;width:%?40?%;padding:%?2?%;box-sizing:border-box;vertical-align:text-bottom}body.?%PAGE?%[data-v-124c040c]{background-color:#e5e5e5}',""]),t.exports=e},cafc:function(t,e,i){"use strict";var n=i("ee27");i("a4d3"),i("e01a"),i("c975"),i("a9e3"),i("e25e"),i("ac1f"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("f3f3")),o=(n(i("2504")),n(i("9a93"))),s=i("2f62"),c={data:function(){return{IPurl_url:"http://51daiyan.com.aa.800123456.top/",msg_type:1,goods_id:"",goods_name:"",goods_img:"",goods_pri:"",conversationActive:null,toUserId:"",toUserInfo:null,userInfo:null,nextReqMessageID:"",count:15,isCompleted:"",msgList:[],TIM:null,textMsg:"",isHistoryLoading:!1,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgImgList:[],myuid:0,isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,AUDIO:uni.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,emojiList:this.$commen.emojiList,onlineEmoji:{"100.gif":"AbNQgA.gif","101.gif":"AbN3ut.gif","102.gif":"AbNM3d.gif","103.gif":"AbN8DP.gif","104.gif":"AbNljI.gif","105.gif":"AbNtUS.gif","106.gif":"AbNGHf.gif","107.gif":"AbNYE8.gif","108.gif":"AbNaCQ.gif","109.gif":"AbNN4g.gif","110.gif":"AbN0vn.gif","111.gif":"AbNd3j.gif","112.gif":"AbNsbV.gif","113.gif":"AbNwgs.gif","114.gif":"AbNrD0.gif","115.gif":"AbNDuq.gif","116.gif":"AbNg5F.gif","117.gif":"AbN6ET.gif","118.gif":"AbNcUU.gif","119.gif":"AbNRC4.gif","120.gif":"AbNhvR.gif","121.gif":"AbNf29.gif","122.gif":"AbNW8J.gif","123.gif":"AbNob6.gif","124.gif":"AbN5K1.gif","125.gif":"AbNHUO.gif","126.gif":"AbNIDx.gif","127.gif":"AbN7VK.gif","128.gif":"AbNb5D.gif","129.gif":"AbNX2d.gif","130.gif":"AbNLPe.gif","131.gif":"AbNjxA.gif","132.gif":"AbNO8H.gif","133.gif":"AbNxKI.gif","134.gif":"AbNzrt.gif","135.gif":"AbU9Vf.gif","136.gif":"AbUSqP.gif","137.gif":"AbUCa8.gif","138.gif":"AbUkGQ.gif","139.gif":"AbUFPg.gif","140.gif":"AbUPIS.gif","141.gif":"AbUZMn.gif","142.gif":"AbUExs.gif","143.gif":"AbUA2j.gif","144.gif":"AbUMIU.gif","145.gif":"AbUerq.gif","146.gif":"AbUKaT.gif","147.gif":"AbUmq0.gif","148.gif":"AbUuZV.gif","149.gif":"AbUliF.gif","150.gif":"AbU1G4.gif","151.gif":"AbU8z9.gif","152.gif":"AbU3RJ.gif","153.gif":"AbUYs1.gif","154.gif":"AbUJMR.gif","155.gif":"AbUadK.gif","156.gif":"AbUtqx.gif","157.gif":"AbUUZ6.gif","158.gif":"AbUBJe.gif","159.gif":"AbUdIO.gif","160.gif":"AbU0iD.gif","161.gif":"AbUrzd.gif","162.gif":"AbUDRH.gif","163.gif":"AbUyQA.gif","164.gif":"AbUWo8.gif","165.gif":"AbU6sI.gif","166.gif":"AbU2eP.gif","167.gif":"AbUcLt.gif","168.gif":"AbU4Jg.gif","169.gif":"AbURdf.gif","170.gif":"AbUhFS.gif","171.gif":"AbU5WQ.gif","172.gif":"AbULwV.gif","173.gif":"AbUIzj.gif","174.gif":"AbUTQs.gif","175.gif":"AbU7yn.gif","176.gif":"AbUqe0.gif","177.gif":"AbUHLq.gif","178.gif":"AbUOoT.gif","179.gif":"AbUvYF.gif","180.gif":"AbUjFU.gif","181.gif":"AbaSSJ.gif","182.gif":"AbUxW4.gif","183.gif":"AbaCO1.gif","184.gif":"Abapl9.gif","185.gif":"Aba9yR.gif","186.gif":"AbaFw6.gif","187.gif":"Abaiex.gif","188.gif":"AbakTK.gif","189.gif":"AbaZfe.png","190.gif":"AbaEFO.gif","191.gif":"AbaVYD.gif","192.gif":"AbamSH.gif","193.gif":"AbaKOI.gif","194.gif":"Abanld.gif","195.gif":"Abau6A.gif","196.gif":"AbaQmt.gif","197.gif":"Abal0P.gif","198.gif":"AbatpQ.gif","199.gif":"Aba1Tf.gif","200.png":"Aba8k8.png","201.png":"AbaGtS.png","202.png":"AbaJfg.png","203.png":"AbaNlj.png","204.png":"Abawmq.png","205.png":"AbaU6s.png","206.png":"AbaaXn.png","207.png":"Aba000.png","208.png":"AbarkT.png","209.png":"AbastU.png","210.png":"AbaB7V.png","211.png":"Abafn1.png","212.png":"Abacp4.png","213.png":"AbayhF.png","214.png":"Abag1J.png","215.png":"Aba2c9.png","216.png":"AbaRXR.png","217.png":"Aba476.png","218.png":"Abah0x.png","219.png":"Abdg58.png"},windowsState:"",redenvelopeData:{rid:null,from:null,face:null,blessing:null,money:null},customModalVisible:!1,customData:"",customDescription:"",customExtension:"",focusedInput:"",isFocus:"",isShow:!1}},computed:(0,a.default)({},(0,s.mapState)({currentMessageList:function(t){return t.currentMessageList}})),watch:{currentMessageList:function(t,e){this.msgList=t,this.screenMsg(t,e)}},onLoad:function(t){var e=this;this.userInfo=JSON.parse(uni.getStorageSync("userInfo")),this.toUserId=this.$store.state.toUserId,console.log("toUserId===============>"+this.toUserId),this.conversationActive=this.$store.state.conversationActive,this.TIM=this.$TIM,this.getmsg(),this.getMsgList(),this.AUDIO.onEnded((function(t){e.playMsgid=null}))},onShow:function(){var t=this;t.isShow=!0,setTimeout((function(){t.scrollToBottom(),t.scrollTop=99999999999999,t.isHistoryLoading=!1}),500)},onUnload:function(){var t=this.tim.setMessageRead({conversationID:this.conversationActive.conversationID});t.then((function(t){console.log("全部已读")})).catch((function(t){console.warn("setMessageRead error:",t)}))},onPullDownRefresh:function(){uni.stopPullDownRefresh()},methods:{imgIP:function(t){if(t)return-1==t.indexOf("://")&&(t=o.default.imgurl+t),t},getmsg:function(){var t=this,e={type:t.msg_type,id:t.toUserId};o.default.P_get("/getTx",e).then((function(e){console.log(e),1==e.code&&(t.toUserInfo=e.data,uni.setNavigationBarTitle({title:e.data.name}))})).catch((function(t){console.log(t),uni.showToast({icon:"none",title:"获取对方数据失败"})}))},gettime1:function(t){if(!(t<0)){console.log(t,t+1);var e=this.msgList[t].time,i=this.msgList[t+1].time;return console.log(this.getchattime(e),this.getchattime(i)),this.getchattime(e)!=this.getchattime(i)?this.getchattime(i):void 0}},jump:function(t){console.log(t),uni.navigateTo({url:t.currentTarget.dataset.url})},onPullDownRefresh:function(){uni.stopPullDownRefresh()},scrollToBottom:function(){this.isShow&&wx.pageScrollTo({scrollTop:9999999})},getarg:function(t,e,i){if("custom"!=i&&t){var n=/\\$/gi;t=t.replace(n,"");var a=JSON.parse(t);return a.hasOwnProperty(e)?a[e]:void 0}},nodesFliter:function(t){var e='<div class="ltbox_div" style="word-wrap:break-word;line-height:40upx;">'+t+"</div>";return e},timeFliter:function(t){var e=new Date(1e3*t),i=this.$commen.dateTimeFliter(e);return i},getchattime:function(t){if(t){var e=(new Date).getFullYear(),i=(new Date).getMonth()+1,n=(new Date).getDate();t=Number(1e3*t);var a=new Date(t),o=a.getFullYear(),s=a.getMonth()+1,c=a.getDate(),r=a.getHours(),l=a.getMinutes();return l<10&&(l="0"+l),console.log(a),o==e?s==i&&c==n?r+":"+l:s+"-"+c+" "+r+":"+l:o+"-"+s+"-"+c+" "+r+":"+l}},screenMsg:function(t,e){var i=this;if(t[0]&&e[0])if(t[0].ID!=e[0].ID&&t.length>=this.count){var n=t.length-e.length-1;this.$nextTick((function(){i.scrollToView=t[n].ID}))}else this.$nextTick((function(){i.scrollToView=t[t.length-1].ID}));else console.log("*****"),this.$nextTick((function(){i.scrollToView=t[t.length-1].ID,i.scrollTop=9999999}))},loadHistory:function(t){var e=this;this.isHistoryLoading=!0;var i=this.conversationActive.conversationID,n=this.tim.getMessageList({conversationID:i,nextReqMessageID:this.nextReqMessageID,count:this.count});n.then((function(t){e.$store.commit("unshiftCurrentMessageList",t.data.messageList),e.nextReqMessageID=t.data.nextReqMessageID,e.isCompleted=t.data.isCompleted,e.isHistoryLoading=!1}))},getMsgList:function(){var t=this,e=this.conversationActive.conversationID,i=this.tim.getMessageList({conversationID:e,count:this.count});i.then((function(e){console.log(e.data),e.data.nextReqMessageID&&(t.$store.commit("pushCurrentMessageList",e.data.messageList),t.nextReqMessageID=e.data.nextReqMessageID,t.isCompleted=e.data.isCompleted,t.scrollToView=e.data.messageList[e.data.messageList.length-1].ID)})),this.$nextTick((function(){this.scrollTop=9999,this.$nextTick((function(){this.scrollAnimation=!0}))}))},setPicSize:function(t){var e=uni.upx2px(350),i=uni.upx2px(350);if(t.w>e||t.h>i){var n=t.w/t.h;t.w=n>1?e:i*n,t.h=n>1?e/n:i}return t},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout((function(){t.hideMore=!0,t.hideEmoji=!0}),150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},handRedEnvelopes:function(){uni.navigateTo({url:"HM-hand/HM-hand"}),this.hideDrawer()},getImage:function(t){var e=this;e.hideDrawer(),uni.chooseImage({sourceType:[t],sizeType:["original","compressed"],count:1,success:function(t){e.sendMsg(t,"img")}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer()},addEmoji:function(t){this.textMsg+=t.alt},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},sendText:function(){if(this.hideDrawer(),this.textMsg){var t=this.replaceEmoji(this.textMsg),e={text:t};this.sendMsg(e,"text"),this.textMsg=""}},replaceEmoji:function(t){var e=this,i=t.replace(/\[([^(\]|\[)]*)\]/g,(function(t,i){console.log("item: "+t);for(var n=0;n<e.emojiList.length;n++)for(var a=e.emojiList[n],o=0;o<a.length;o++){var s=a[o];if(s.alt==t){var c="http://51daiyan.test.upcdn.net/static_s/51daiyan/img/emoji/",r='<img class="emoji_i" src="'+c+s.url+'">';return console.log("imgstr: "+r),r}}}));return i},sendMsg:function(t,e){var i,n=this;console.log("????"),console.log(e),i="custom"==e?this.tim.createCustomMessage({to:this.toUserId,conversationType:"C2C",payload:{data:t.data,description:t.description,extension:t.extension}}):"img"==e?this.tim.createImageMessage({to:this.toUserId,conversationType:"C2C",payload:{file:t}}):this.tim.createTextMessage({to:this.toUserId,conversationType:"C2C",payload:{text:t.text}}),console.log("????1"),this.$store.commit("pushCurrentMessageList",i);var a=this.tim.sendMessage(i);a.then((function(t){n.$nextTick((function(){n.scrollToView=t.data.message.ID,n.scrollToBottom()}))}),(function(t){console.log(t)}))},addTextMsg:function(t){this.msgList.push(t)},addVoiceMsg:function(t){this.msgList.push(t)},addImgMsg:function(t){t.msg.content=this.setPicSize(t.msg.content),this.msgImgList.push(t.msg.content.url),this.msgList.push(t)},addRedEnvelopeMsg:function(t){this.msgList.push(t)},addSystemTextMsg:function(t){this.msgList.push(t)},addSystemRedEnvelopeMsg:function(t){this.msgList.push(t)},openRedEnvelope:function(t,e){var i=this,n=t.content.rid;uni.showLoading({title:"加载中..."}),console.log("index: "+e),setTimeout((function(){0==n?i.redenvelopeData={rid:0,from:"大黑哥",face:"/static/img/im/face/face.jpg",blessing:"恭喜发财，大吉大利",money:"已领完"}:(i.redenvelopeData={rid:1,from:"售后客服008",face:"/static/img/im/face/face_2.jpg",blessing:"恭喜发财",money:"0.01"},t.content.isReceived||(i.sendSystemMsg({text:"你领取了"+(t.userinfo.uid==i.myuid?"自己":t.userinfo.username)+"的红包"},"redEnvelope"),console.log("this.msgList[index]: "+JSON.stringify(i.msgList[e])),i.msgList[e].msg.content.isReceived=!0)),uni.hideLoading(),i.windowsState="show"}),200)},closeRedEnvelope:function(){var t=this;this.windowsState="hide",setTimeout((function(){t.windowsState=""}),200)},sendSystemMsg:function(t,e){var i=this.msgList[this.msgList.length-1].msg.id;i++;var n={type:"system",msg:{id:i,type:e,content:t}};this.screenMsg(n)},toDetails:function(t){uni.navigateTo({url:"HM-details/HM-details?rid="+t})},showPic:function(t){uni.previewImage({indicator:"none",current:t.content.url,urls:this.msgImgList})},playVoice:function(t){this.playMsgid=t.id,this.AUDIO.src=t.content.url,this.$nextTick((function(){this.AUDIO.play()}))},voiceBegin:function(t){t.touches.length>1||(this.initPoint.Y=t.touches[0].clientY,this.initPoint.identifier=t.touches[0].identifier,this.RECORDER.start({format:"mp3"}))},recordBegin:function(t){var e=this;this.recording=!0,this.voiceTis="松开 结束",this.recordLength=0,this.recordTimer=setInterval((function(){e.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(t){if(this.recording){var e=t.touches[0];this.initPoint.Y-e.clientY>=uni.upx2px(100)?(this.willStop=!0,this.recordTis="松开手指 取消发送"):(this.willStop=!1,this.recordTis="手指上滑 取消发送")}},voiceEnd:function(t){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.RECORDER.stop())},recordEnd:function(t){if(clearInterval(this.recordTimer),this.willStop)console.log("取消发送录音");else{console.log("e: "+JSON.stringify(t));var e={length:0,url:t.tempFilePath},i=parseInt(this.recordLength/60),n=this.recordLength%60;i=i<10?"0"+i:i,n=n<10?"0"+n:n,e.length=i+":"+n,this.sendMsg(e,"voice")}this.willStop=!1},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){},customModal:function(){var t=this;uni.showModal({title:"提示",content:"是否发送此商品",success:function(e){if(e.confirm){console.log("用户点击确定");var i={a:t.goods_pri,a1:"a1",a2:t.goods_id,a3:o.default.imgurl+t.goods_img};i=JSON.stringify(i);var n={data:"custom_good",description:t.goods_name,extension:i};t.sendMsg(n,"custom")}else e.cancel&&console.log("用户点击取消")}})},handleClose:function(){this.rateModal=!1,this.isFocus=!1,this.isMoreOpen=!1,this.isEmojiOpen=!1},previmg:function(t){console.log(t);var e=[];e.push(t.currentTarget.dataset.url),uni.previewImage({urls:e,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮,第"+(t.index+1)+"张图片")},fail:function(t){console.log(t.errMsg)}}})}}};e.default=c},eda3:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"content",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.hideDrawer.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"msg-list"},[i("v-uni-view",{staticClass:"msg-list1"},[t.isHistoryLoading?i("v-uni-view",{staticClass:"loading"},[i("v-uni-view",{staticClass:"spinner"},[i("v-uni-view",{staticClass:"rect1"}),i("v-uni-view",{staticClass:"rect2"}),i("v-uni-view",{staticClass:"rect3"}),i("v-uni-view",{staticClass:"rect4"}),i("v-uni-view",{staticClass:"rect5"})],1)],1):t._e(),t._l(t.msgList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"row",attrs:{id:e.ID}},[["out"==e.flow?i("v-uni-view",{staticClass:"my"},[i("v-uni-view",{staticClass:"left"},[e.type==t.TIM.TYPES.MSG_TEXT?i("v-uni-view",{staticClass:"bubble"},[i("v-uni-rich-text",{attrs:{nodes:t.nodesFliter(e.payload.text)}})],1):t._e(),e.type==t.TIM.TYPES.MSG_IMAGE?i("v-uni-view",{staticClass:"bubble"},[i("v-uni-image",{staticStyle:{width:"64px",height:"64px"},attrs:{"data-url":e.payload.imageInfoArray[0].imageUrl,src:e.payload.imageInfoArray[0].imageUrl,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previmg.apply(void 0,arguments)}}})],1):t._e(),e.type==t.TIM.TYPES.MSG_CUSTOM?i("v-uni-view",{staticClass:"bubble"},["custom"==e.payload.data?i("v-uni-view",[t._v(t._s(e.payload.data))]):t._e(),"custom"==e.payload.data?i("v-uni-view",[t._v(t._s(e.payload.description))]):t._e(),"custom"==e.payload.data?i("v-uni-view",[t._v(t._s(e.payload.extension))]):t._e(),"custom1"==e.payload.data?i("v-uni-view",[t._v(t._s("自定义参数1:"+t.getarg(e.payload.extension,"a",e.payload.data))+"\n\t\t\t\t\t\t\t\t\t"+t._s("自定义参数2:"+t.getarg(e.payload.extension,"a1",e.payload.data))+"\n\t\t\t\t\t\t\t\t\t"+t._s("自定义参数3:"+t.getarg(e.payload.extension,"a2",e.payload.data))+"\n\t\t\t\t\t\t\t\t\t"+t._s("自定义参数4:"+t.getarg(e.payload.extension,"a3",e.payload.data)))]):t._e(),"custom_good"==e.payload.data?i("a",{staticClass:"chat_box",attrs:{href:t.IPurl_url+"/merchant/goods.Goods/look.html?id="+t.getarg(e.payload.extension,"a2",e.payload.data)}},[i("v-uni-image",{staticClass:"chat_img",staticStyle:{width:"120px",height:"120px"},attrs:{src:t.getarg(e.payload.extension,"a3",e.payload.data),mode:"aspectFill"}}),i("v-uni-view",{staticClass:"chat_msg"},[i("v-uni-view",{staticClass:"gb_name oh2"},[t._v(t._s(e.payload.description))]),i("v-uni-view",{staticClass:"gb_msg  oh1"},[t._v(t._s("￥"+t.getarg(e.payload.extension,"a",e.payload.data)))])],1)],1):t._e()],1):t._e()],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-image",{attrs:{src:t.userInfo.avatarurl}})],1)],1):i("v-uni-view",{staticClass:"other"},[t.toUserInfo?i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{attrs:{src:t.toUserInfo.head_portrait}})],1):t._e(),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"username"},[i("v-uni-view",{staticClass:"name"}),0==n?i("v-uni-view",{staticClass:"time"},[t._v(t._s(t.timeFliter(e.time)))]):n>0?i("v-uni-view",{staticClass:"time"},[t._v(t._s(t.gettime1(n-1)))]):t._e(),i("v-uni-view",{staticStyle:{color:"rgba(0,0,0,0)"}})],1),e.type==t.TIM.TYPES.MSG_TEXT?i("v-uni-view",{staticClass:"bubble"},[i("v-uni-rich-text",{attrs:{nodes:t.nodesFliter(e.payload.text)}})],1):t._e(),e.type==t.TIM.TYPES.MSG_IMAGE?i("v-uni-view",{staticClass:"bubble"},[i("v-uni-image",{staticStyle:{width:"64px",height:"64px"},attrs:{"data-url":e.payload.imageInfoArray[0].imageUrl,src:e.payload.imageInfoArray[0].imageUrl,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previmg.apply(void 0,arguments)}}})],1):t._e(),e.type==t.TIM.TYPES.MSG_CUSTOM?i("v-uni-view",{staticClass:"bubble"},["custom"==e.payload.data?i("v-uni-view",[t._v(t._s(e.payload.data))]):t._e(),"custom"==e.payload.data?i("v-uni-view",[t._v(t._s(e.payload.description))]):t._e(),"custom"==e.payload.data?i("v-uni-view",[t._v(t._s(e.payload.extension))]):t._e(),"custom1"==e.payload.data?i("v-uni-view",[t._v(t._s("自定义参数1:"+t.getarg(e.payload.extension,"a",e.payload.data))+"\n\t\t\t\t\t\t\t\t\t"+t._s("自定义参数2:"+t.getarg(e.payload.extension,"a1",e.payload.data))+"\n\t\t\t\t\t\t\t\t\t"+t._s("自定义参数3:"+t.getarg(e.payload.extension,"a2",e.payload.data))+"\n\t\t\t\t\t\t\t\t\t"+t._s("自定义参数4:"+t.getarg(e.payload.extension,"a3",e.payload.data)))]):t._e(),"custom_good"==e.payload.data?i("a",{staticClass:"chat_box",attrs:{href:t.IPurl_url+"/merchant/goods.Goods/look.html?id="+t.getarg(e.payload.extension,"a2",e.payload.data)}},[i("v-uni-image",{staticClass:"chat_img",staticStyle:{width:"120px",height:"120px"},attrs:{src:t.getarg(e.payload.extension,"a3",e.payload.data),mode:"aspectFill"}}),i("v-uni-view",{staticClass:"chat_msg"},[i("v-uni-view",{staticClass:"gb_name oh2"},[t._v(t._s(e.payload.description))]),i("v-uni-view",{staticClass:"gb_msg  oh1"},[t._v(t._s("￥"+t.getarg(e.payload.extension,"a",e.payload.data)))])],1)],1):t._e()],1):t._e()],1)],1)]],2)}))],2)],1)],1),i("v-uni-view",{staticClass:"popup-layer",class:t.popupLayerClass,on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.discard.apply(void 0,arguments)}}},[i("v-uni-swiper",{staticClass:"emoji-swiper",class:{hidden:t.hideEmoji},attrs:{"indicator-dots":"true",duration:"150"}},t._l(t.emojiList,(function(e,n){return i("v-uni-swiper-item",{key:n},t._l(e,(function(e,n){return i("v-uni-view",{key:n,on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addEmoji(e)}}},[i("v-uni-image",{attrs:{mode:"widthFix",src:t.imgIP("/static_s/51daiyan/img/emoji/"+e.url)}})],1)})),1)})),1),i("v-uni-view",{staticClass:"more-layer",class:{hidden:t.hideMore}},[i("v-uni-view",{staticClass:"list"},[i("v-uni-view",{staticClass:"box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"icon tupian2"})],1),i("v-uni-view",{staticClass:"box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.camera.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"icon paizhao"})],1),i("v-uni-view",{staticClass:"box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handRedEnvelopes.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"icon hongbao"})],1)],1)],1)],1),i("v-uni-view",{staticClass:"input-box",class:t.popupLayerClass,on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.discard.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showMore.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"icon add"})],1),i("v-uni-view",{staticClass:"textbox"},[i("v-uni-view",{staticClass:"voice-mode",class:[t.isVoice?"":"hidden",t.recording?"recording":""],on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.voiceBegin.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.voiceIng.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.voiceEnd.apply(void 0,arguments)},touchcancel:function(e){arguments[0]=e=t.$handleEvent(e),t.voiceCancel.apply(void 0,arguments)}}},[t._v(t._s(t.voiceTis))]),i("v-uni-view",{staticClass:"text-mode",class:t.isVoice?"hidden":""},[i("v-uni-view",{staticClass:"box",staticStyle:{flex:"1"}},[i("v-uni-input",{staticClass:"input",attrs:{type:"text","confirm-type":"send",focus:t.isFocus,"cursor-spacing":"18"},on:{focus:function(e){arguments[0]=e=t.$handleEvent(e),t.isFocus=!0},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.isFocus=!1},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.sendText.apply(void 0,arguments)}},model:{value:t.textMsg,callback:function(e){t.textMsg=e},expression:"textMsg"}})],1),i("v-uni-view",{staticClass:"em",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseEmoji.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"icon biaoqing"})],1)],1)],1),i("v-uni-view",{staticClass:"send",class:t.isVoice?"hidden":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendText.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"btn"},[t._v("发送")])],1)],1),i("v-uni-view",{staticClass:"record",class:t.recording?"":"hidden"},[i("v-uni-view",{staticClass:"ing",class:t.willStop?"hidden":""},[i("v-uni-view",{staticClass:"icon luyin2"})],1),i("v-uni-view",{staticClass:"cancel",class:t.willStop?"":"hidden"},[i("v-uni-view",{staticClass:"icon chehui"})],1),i("v-uni-view",{staticClass:"tis",class:t.willStop?"change":""},[t._v(t._s(t.recordTis))])],1),i("v-uni-view",{staticClass:"windows",class:t.windowsState},[i("v-uni-view",{staticClass:"mask",on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.discard.apply(void 0,arguments)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeRedEnvelope.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"layer",on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.discard.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"open-redenvelope"},[i("v-uni-view",{staticClass:"top"},[i("v-uni-view",{staticClass:"close-btn"},[i("v-uni-view",{staticClass:"icon close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeRedEnvelope.apply(void 0,arguments)}}})],1),i("v-uni-image",{attrs:{src:"/static/img/im/face/face_1.jpg"}})],1),i("v-uni-view",{staticClass:"from"},[t._v("来自"+t._s(t.redenvelopeData.from))]),i("v-uni-view",{staticClass:"blessing"},[t._v(t._s(t.redenvelopeData.blessing))]),i("v-uni-view",{staticClass:"money"},[t._v(t._s(t.redenvelopeData.money))]),i("v-uni-view",{staticClass:"showDetails",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDetails(t.redenvelopeData.rid)}}},[t._v("查看领取详情"),i("v-uni-view",{staticClass:"icon to"})],1)],1)],1)],1)],1)},o=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},f592:function(t,e,i){var n=i("af96");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("55f8ace8",n,!0,{sourceMap:!1,shadowMode:!1})},fe3b:function(t,e,i){i("4ec9"),i("d3b7"),i("3ca3"),i("ddb0");var n=new Map,a={on:function(t,e,i){return n.hasOwnProperty(t)||(n[t]=new Map),n[t][e]=i,a},trigger:function(t){var e={type:t.type,page:t.page||"all"};if("all"==e.page){for(var i in n)if(n[i][e.type]){var a=n[i][e.type].call(this,t);t.success&&(a?t.success(a):t.success())}}else if(n.hasOwnProperty(e.page)&&n[e.page][e.type]){a=n[e.page][e.type].call(this,t);t.success&&(a?t.success(a):t.success())}},remove:function(t,e){t&&(e?delete n[t][e]:delete n[t])}};t.exports=a}}]);