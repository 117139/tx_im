<view><view data-event-opts="{{[['touchstart',[['hideDrawer',['$event']]]]]}}" class="content" bindtouchstart="__e"><view class="msg-list"><view class="msg-list1"><block wx:if="{{isHistoryLoading}}"><view class="loading"><view class="spinner"><view class="rect1"></view><view class="rect2"></view><view class="rect3"></view><view class="rect4"></view><view class="rect5"></view></view></view></block><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="row" id="{{item.$orig.ID}}"><block><block wx:if="{{item.$orig.flow=='out'}}"><view class="my"><view class="left"><block wx:if="{{item.$orig.type==TIM.TYPES.MSG_TEXT}}"><view class="bubble"><rich-text nodes="{{item.m0}}"></rich-text></view></block><block wx:if="{{item.$orig.type==TIM.TYPES.MSG_IMAGE}}"><view class="bubble"><image style="width:64px;height:64px;" data-url="{{item.$orig.payload.imageInfoArray[0].imageUrl}}" src="{{item.$orig.payload.imageInfoArray[0].imageUrl}}" mode="aspectFill" data-event-opts="{{[['tap',[['previmg',['$event']]]]]}}" bindtap="__e"></image></view></block><block wx:if="{{item.$orig.type==TIM.TYPES.MSG_CUSTOM}}"><view class="bubble"><block wx:if="{{item.$orig.payload.data=='custom'}}"><view>{{item.$orig.payload.data}}</view></block><block wx:if="{{item.$orig.payload.data=='custom'}}"><view>{{item.$orig.payload.description}}</view></block><block wx:if="{{item.$orig.payload.data=='custom'}}"><view>{{item.$orig.payload.extension}}</view></block><block wx:if="{{item.$orig.payload.data=='custom1'}}"><view>{{''+('自定义参数1:'+item.m1)+"\n\t\t\t\t\t\t\t\t\t"+('自定义参数2:'+item.m2)+"\n\t\t\t\t\t\t\t\t\t"+('自定义参数3:'+item.m3)+"\n\t\t\t\t\t\t\t\t\t"+('自定义参数4:'+item.m4)+''}}</view></block><block wx:if="{{item.$orig.payload.data=='custom_good'}}"><view class="chat_box" data-url="{{item.m5}}" data-event-opts="{{[['tap',[['jump',['$event']]]]]}}" bindtap="__e"><image class="chat_img" style="width:64px;height:64px;" src="{{item.m6}}" mode="aspectFill"></image><view class="chat_msg"><view class="gb_name oh1">{{item.$orig.payload.description}}</view><view class="gb_msg  oh1">{{'自定义参数1:'+item.m7}}</view><view class="gb_msg oh1">{{'自定义参数2:'+item.m8}}</view><view class="gb_msg oh1">{{'自定义参数3:'+item.m9}}</view></view></view></block></view></block></view><view class="right"><image src="{{userInfo.img}}"></image></view></view></block><block wx:else><view class="other"><view class="left"><image src="{{toUserInfo.img}}"></image></view><view class="right"><view class="username"><view class="name">{{toUserInfo.user}}</view><block wx:if="{{index==0}}"><view class="time">{{item.m10}}</view></block><block wx:else><view>{{$root.m11}}</view></block><view style="color:rgba(0,0,0,0);">{{toUserInfo.user}}</view></view><block wx:if="{{item.$orig.type==TIM.TYPES.MSG_TEXT}}"><view class="bubble"><rich-text nodes="{{item.m12}}"></rich-text></view></block><block wx:if="{{item.$orig.type==TIM.TYPES.MSG_IMAGE}}"><view class="bubble"><image style="width:64px;height:64px;" data-url="{{item.$orig.payload.imageInfoArray[0].imageUrl}}" src="{{item.$orig.payload.imageInfoArray[0].imageUrl}}" mode="aspectFill" data-event-opts="{{[['tap',[['previmg',['$event']]]]]}}" bindtap="__e"></image></view></block><block wx:if="{{item.$orig.type==TIM.TYPES.MSG_CUSTOM}}"><view class="bubble"><block wx:if="{{item.$orig.payload.data=='custom'}}"><view>{{item.$orig.payload.data}}</view></block><block wx:if="{{item.$orig.payload.data=='custom'}}"><view>{{item.$orig.payload.description}}</view></block><block wx:if="{{item.$orig.payload.data=='custom'}}"><view>{{item.$orig.payload.extension}}</view></block><block wx:if="{{item.$orig.payload.data=='custom1'}}"><view>{{''+('自定义参数1:'+item.m13)+"\n\t\t\t\t\t\t\t\t\t"+('自定义参数2:'+item.m14)+"\n\t\t\t\t\t\t\t\t\t"+('自定义参数3:'+item.m15)+"\n\t\t\t\t\t\t\t\t\t"+('自定义参数4:'+item.m16)+''}}</view></block><block wx:if="{{item.$orig.payload.data=='custom_good'}}"><view class="chat_box" data-url="{{item.m17}}" data-event-opts="{{[['tap',[['jump',['$event']]]]]}}" bindtap="__e"><image class="chat_img" style="width:64px;height:64px;" src="{{item.m18}}" mode="aspectFill"></image><view class="chat_msg"><view class="gb_name oh1">{{item.$orig.payload.description}}</view><view class="gb_msg oh1">{{'自定义参数1:'+item.m19}}</view><view class="gb_msg oh1">{{'自定义参数2:'+item.m20}}</view><view class="gb_msg oh1">{{'自定义参数3:'+item.m21}}</view></view></view></block></view></block></view></view></block></block></view></block></view></view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['popup-layer',popupLayerClass]}}" catchtouchmove="__e"><swiper class="{{['emoji-swiper',(hideEmoji)?'hidden':'']}}" indicator-dots="true" duration="150"><block wx:for="{{emojiList}}" wx:for-item="page" wx:for-index="pid" wx:key="pid"><swiper-item><block wx:for="{{page}}" wx:for-item="em" wx:for-index="eid" wx:key="eid"><view data-event-opts="{{[['tap',[['addEmoji',['$0'],[[['emojiList','',pid],['','',eid]]]]]]]}}" bindtap="__e"><image mode="widthFix" src="{{'/static/img/emoji/'+em.url}}"></image></view></block></swiper-item></block></swiper><view class="{{['more-layer',(hideMore)?'hidden':'']}}"><view class="list"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon tupian2"></view></view><view data-event-opts="{{[['tap',[['camera',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon paizhao"></view></view><view data-event-opts="{{[['tap',[['handRedEnvelopes',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon hongbao"></view></view><view data-event-opts="{{[['tap',[['customModal',['$event']]]]]}}" class="box" bindtap="__e"><view class="iconfont icon-zidingyi"></view></view></view></view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['input-box',popupLayerClass]}}" catchtouchmove="__e"><view class="textbox"><view data-event-opts="{{[['touchstart',[['voiceBegin',['$event']]]],['touchmove',[['voiceIng',['$event']]]],['touchend',[['voiceEnd',['$event']]]],['touchcancel',[['voiceCancel',['$event']]]]]}}" class="{{['voice-mode',isVoice?'':'hidden',recording?'recording':'']}}" bindtouchstart="__e" catchtouchmove="__e" bindtouchend="__e" bindtouchcancel="__e">{{voiceTis}}</view><view class="{{['text-mode',isVoice?'hidden':'']}}"><view class="box" style="flex:1;"><input class="input" type="text" confirm-type="send" focus="{{isFocus}}" cursor-spacing="18" data-event-opts="{{[['focus',[['e0',['$event']]]],['blur',[['e1',['$event']]]],['confirm',[['sendText',['$event']]]],['input',[['__set_model',['','textMsg','$event',[]]]]]]}}" value="{{textMsg}}" bindfocus="__e" bindblur="__e" bindconfirm="__e" bindinput="__e"/></view><view data-event-opts="{{[['tap',[['chooseEmoji',['$event']]]]]}}" class="em" bindtap="__e"><view class="icon biaoqing"></view></view></view></view><view data-event-opts="{{[['tap',[['showMore',['$event']]]]]}}" class="more" bindtap="__e"><view class="icon add"></view></view><view data-event-opts="{{[['tap',[['sendText',['$event']]]]]}}" class="{{['send',isVoice?'hidden':'']}}" bindtap="__e"><view class="btn">发送</view></view></view><view class="{{['record',recording?'':'hidden']}}"><view class="{{['ing',willStop?'hidden':'']}}"><view class="icon luyin2"></view></view><view class="{{['cancel',willStop?'':'hidden']}}"><view class="icon chehui"></view></view><view class="{{['tis',willStop?'change':'']}}">{{recordTis}}</view></view><view class="{{['windows',windowsState]}}"><view data-event-opts="{{[['touchmove',[['discard',['$event']]]],['tap',[['closeRedEnvelope',['$event']]]]]}}" class="mask" catchtouchmove="__e" bindtap="__e"></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="layer" catchtouchmove="__e"><view class="open-redenvelope"><view class="top"><view class="close-btn"><view data-event-opts="{{[['tap',[['closeRedEnvelope',['$event']]]]]}}" class="icon close" bindtap="__e"></view></view><image src="/static/img/im/face/face_1.jpg"></image></view><view class="from">{{"来自"+redenvelopeData.from}}</view><view class="blessing">{{redenvelopeData.blessing}}</view><view class="money">{{redenvelopeData.money}}</view><view data-event-opts="{{[['tap',[['toDetails',['$0'],['redenvelopeData.rid']]]]]}}" class="showDetails" bindtap="__e">查看领取详情<view class="icon to"></view></view></view></view></view></view>